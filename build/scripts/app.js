var Application=function(){function a(a){var b,c,d=(a||"Application").split("."),e=window.Application||(window.Application={});for(d="Application"===d[0]?d.slice(1):d,b=0,c=d.length;c>b;b++)e[d[b]]=e[d[b]]||{},e=e[d[b]];return e}function b(){f=new d.DateRange,e.NavigationController.bind(f),e.NoteController.bind(f)}function c(){window.addEventListener("load",function(){b()})}var d={},e={},f=null;return{Models:d,Controllers:e,getNamespace:a,start:c}}();!function(a){var b=a.getNamespace("Controllers"),c=a.getNamespace("Models"),d=a.getNamespace("Views");b.NavigationController={bind:function(a){function b(b){var e,f=document.getElementById("month"),g=document.getElementById("date"),h=document.getElementById("canvas"),i=a.getCurrentWeek()[b],b=0,j=i.notes.length;for(week=a.changeCurrentDay(i.date.getTime()),f.textContent=c.Months[i.date.getMonth()],g.textContent=i.date.getDate()<10?"0"+i.date.getDate():i.date.getDate();h.firstChild;)h.removeChild(h.firstChild);for(b=0;j>b;b++)e=new d.NoteView(i.notes[b]),e.parentEle=h,e.render()}var e=document.querySelector("header");e.addEventListener("click",function(c){var d,e=!0;((e=/\w*roundStyle\w*/.test(c.target.className))||/\w*roundStyle*\w/.test(c.target.parentElement.className))&&(d=e?c.target:c.target.parentElement,"previous"===d.id?(a.getPreviousWeek(),bind()):"next"===d.id?(a.getNextWeek(),bind()):"createNote"!==d.id&&b(parseInt(d.id)))}),(bind=function(){var c=document.querySelectorAll("p.day"),d=0,e=c.length,f=a.getCurrentWeek(),g=a.getCurrentDay();for(d=0;e>d;d++)c[d].textContent=f[d].date.getDate(),f[d].date.getTime()===g.date.getTime()&&(c[d].parentElement.parentElement.children[0].checked=!0,b(d))})()}}}(Application),function(a){var b=a.getNamespace("Controllers"),c=(a.getNamespace("Models"),a.getNamespace("Views"));b.NoteController={bind:function(a){var b=document.getElementById("createNote");b.addEventListener("click",function(){var b=new c.NoteView(a.createNote()),d=document.getElementById("canvas");b.parentEle=d,b.render()})}}}(Application),function(a){var b=(a.getNamespace("Models"),a.getNamespace("Views"));b.NoteView=function(a){this._data=a,this._element=null,this.parentEle=document.getElementById("canvas")},b.NoteView.prototype._buildElement=function(){var a=document.createElement("div"),b=document.createElement("section"),c=document.createElement("section"),d=document.createElement("input"),e=document.createElement("textarea"),f=document.createElement("input");a.className="noteWrapper",a.appendChild(c),a.appendChild(b),c.appendChild(d),c.appendChild(f),b.appendChild(e),f.setAttribute("type","button"),d.className="textControl",d.setAttribute("value",this._data.title),e.className="textControl",e.textContent=this._data.description,e.style.resize="none",e.setAttribute("spellcheck","false"),f.className="btn",f.setAttribute("value","Ã—"),this._element=a},b.NoteView.prototype.render=function(){if(!this.parentEle)throw new ReferenceError("A parent element is empty!");this._buildElement(),this.parentEle.appendChild(this._element)}}(Application),function(a){var b=a.getNamespace("Models");b.DateContainer=function(a,b){this.date=a,this.notes=b},b.DateContainer.prototype.save=function(){localStorage[this.date.getTime()]=JSON.stringify(this.notes)},b.DateContainer.prototype.createNote=function(){var a=new b.Note;return this.notes.push(a),this.save(),a}}(Application),function(a){var b=a.getNamespace("Models");b.DateRange=function(){this._currentDate=null,this._currentWeek=null,this._initialize()},b.DateRange.MILISEC=864e5,b.DateRange.DAYS_QUANTITY=7,b.DateRange.prototype._initialize=function(){var a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);var c,d,e=a.getDay(),f=a.getTime()-(e-1)*b.DateRange.MILISEC,g=a.getTime()+(b.DateRange.DAYS_QUANTITY-e)*b.DateRange.MILISEC;for(0===e&&(f=a.getTime()-(b.DateRange.DAYS_QUANTITY-1)*b.DateRange.MILISEC,g=a),c=f,this._currentWeek=[];g>=c;c+=b.DateRange.MILISEC)d=new b.DateContainer(new Date(c),localStorage[c]&&JSON.parse(localStorage[c])||[]),d.save(),this._currentWeek.push(d),c===a.getTime()&&(this._currentDate=d)},b.DateRange.prototype.createNote=function(){return this._currentDate.createNote()},b.DateRange.prototype.getNextWeek=function(){var a,c,d=this._currentWeek[this._currentWeek.length-1].date.getTime()+b.DateRange.MILISEC,e=d+(b.DateRange.DAYS_QUANTITY-1)*b.DateRange.MILISEC;for(this._currentDate.save(),this._currentWeek=[],c=d;e>=c;c+=b.DateRange.MILISEC)a=new b.DateContainer(new Date(c),localStorage[c]&&JSON.parse(localStorage[c])||[]),this._currentWeek.push(a);return this._currentDate=this._currentWeek[0],this._currentWeek},b.DateRange.prototype.getPreviousWeek=function(){var a,c,d=this._currentWeek[0].date.getTime()-b.DateRange.DAYS_QUANTITY*b.DateRange.MILISEC,e=d+b.DateRange.MILISEC*(b.DateRange.DAYS_QUANTITY-1);for(this._currentDate.save(),this._currentWeek=[],c=d;e>=c;c+=b.DateRange.MILISEC)a=new b.DateContainer(new Date(c),localStorage[c]&&JSON.parse(localStorage[c])||[]),this._currentWeek.push(a);return this._currentDate=this._currentWeek[this._currentWeek.length-1],this._currentWeek},b.DateRange.prototype.getCurrentWeek=function(){return this._currentWeek},b.DateRange.prototype.getCurrentDay=function(){return this._currentDate},b.DateRange.prototype.changeCurrentDay=function(a){var c;if("number"!=typeof a)throw new TypeError("Models.DateRange.getConcreteDay illegal argument error!");if(this._currentWeek[0].date.getTime()>a||this._currentWeek[this._currentWeek.length-1].date.getTime()<a)throw new RangeError("Date is out of the range!");return c=a-this._currentWeek[0].date.getTime(),this._currentDate.save(),this._currentDate=this._currentWeek[c/b.DateRange.MILISEC]}}(Application),function(a){var b=a.getNamespace("Models");b.DayNames=["Monday","Tuesday","Thursday","Wednesday","Friday","Saturday","Sunday"]}(Application),function(a){var b=a.getNamespace("Models");b.DaysEnum={MONDAY:0,TUESDAY:1,WEDNESDAY:2,THURSDAY:3,FRIDAY:4,SATURDAY:5,SUNDAY:6}}(Application),function(a){var b=a.getNamespace("Models");b.Months=["January","February","March","April","May","June","July","August","September","October","November","December"]}(Application),function(a){var b=a.getNamespace("Models");b.Note=function(a){this.id=b.Note.id++,this.date=a,this.title="Title",this.description="Description",this.position={X:0,Y:0}},b.Note.id=0}(Application);